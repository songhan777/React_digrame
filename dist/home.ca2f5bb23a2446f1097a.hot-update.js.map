{"version":3,"sources":["webpack:///./src/container/HomePage/index.js"],"names":["HomePage","observer","props","state","value","username","password","showPassword","foucse","redirectToReferrer","formdataChange","setState","prop","event","target","handleClickShowPassword","handleChange","handleType","login","data","then","redata","code","authenticated","sigout","alert","catch","err","console","log","oauth","redirect_uri","authWin","window","open","timerId","setInterval","clearInterval","close","location","reload","store","isAuthenticated","classes","from","pathname","root","AppRoot","toolBar","grow","growLogo","indicator","tabsIndicator","Link","first","modle","textColor","loging","cssLabel","focused","cssFocused","underline","cssUnderline","display","endAdornment","loginButton","forgetButton","singUpButton","footer","center","Component","styles"],"mappings":"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","file":"home.ca2f5bb23a2446f1097a.hot-update.js","sourcesContent":["import React, {Component} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { withStyles } from '@material-ui/core'\r\nimport { Link, withRouter, Redirect} from 'react-router-dom'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Button from '@material-ui/core/Button'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport SettinsOutlined from '@material-ui/icons/SettingsOutlined'\r\nimport PermIdentity from '@material-ui/icons/PermIdentity'\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Person from '@material-ui/icons/Person';\r\nimport Lock from '@material-ui/icons/Lock'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport { getOAuthJson, postSession, getVerify} from '../../API/API'\r\nimport {styles} from './css'\r\nimport { observer, inject } from 'mobx-react'\r\n\r\n@inject('store')\r\n@observer\r\nclass HomePage extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.store = props.store.authenticated//加载仓库\r\n        this.isAuthenticated = this.store.isAuthenticated//仓库中变量\r\n        this.authenticated = this.store.authenticated// 登录修改变量方法\r\n        this.sigout = this.store.sigout// 退出\r\n        getVerify().then((data)=>{// BrowserRouter 每次路由都会从indx.html开始，所以在这判断是否在线\r\n            if (data.code == 0) {\r\n                console.log('应该重载下')\r\n                this.authenticated(()=>{\r\n                    this.setState({redirectToReferrer: true})\r\n                })\r\n            }else {\r\n                this.sigout(()=>{\r\n                    this.setState({redirectToReferrer:false})\r\n                })\r\n            }\r\n        })\r\n    }\r\n    state = {\r\n        value: 0,//home页头上的三个导航栏值\r\n        username:'',//输入的用户名\r\n        password: '',//输入的密码\r\n        showPassword: false,\r\n        foucse: false,\r\n        redirectToReferrer: false,//跳转控制，是否登录\r\n    }\r\n\r\n    formdataChange = prop => event => {\r\n        this.setState({[prop]: event.target.value});\r\n    };\r\n\r\n    handleClickShowPassword = () => {\r\n        this.setState(state => ({showPassword: !state.showPassword}));\r\n    };\r\n\r\n    handleChange = (event, value) => {\r\n        this.setState({value});\r\n    };\r\n\r\n    handleType = () => {\r\n        this.setState({foucse: true})\r\n    }\r\n    /**\r\n     *\r\n     *登录函数，点击登录发送数据\r\n     * @memberof HomePage\r\n     */\r\n    login = () => {\r\n        const data = {username:this.state.username, password: this.state.password}\r\n        postSession(data).then((redata) => {\r\n            if ( redata.code === 0) {\r\n                this.authenticated(() =>{\r\n                    this.setState({redirectToReferrer: true})\r\n                })\r\n            } else {\r\n                this.sigout(() =>{\r\n                    this.setState({redirectToReferrer:false})\r\n                })\r\n                alert(\"登录失败刷新页面重新登录\")\r\n            }\r\n        }).catch((err) =>{\r\n            console.log(err)\r\n            this.sigout(() =>{\r\n                this.setState({redirectToReferrer:false})\r\n            })\r\n            alert(\"登录失败刷新页面重新登录\")\r\n        })\r\n    }\r\n    /**\r\n     *\r\n     *github oauth\r\n     * @memberof HomePage\r\n     */\r\n    oauth = () => {\r\n        let redirect_uri = null;\r\n/*         if (DEV) {\r\n            redirect_uri = 'http://localhost:3000/user/oauth/gitcb'\r\n        } else {\r\n            redirect_uri = 'http://flow.dv.ailab.win/user/oauth/gitcb'\r\n        } */\r\n        const authWin = window.open(`https://passport.escience.cn/oauth2/authorize?response_type=code&redirect_uri=http://flow.dv.ailab.win/user/oauth/cb&client_id=96478&theme=full`, '_blank')\r\n\r\n        const timerId = setInterval(function () {\r\n            getOAuthJson().then((data) =>{\r\n                if(data.code === 0 ) {\r\n                    clearInterval(timerId)\r\n                    authWin.close()\r\n                    window.location.reload()\r\n                }\r\n            });\r\n        })\r\n    }\r\n    \r\n    render() {\r\n        const {classes} = this.props\r\n        let {value} = this.state\r\n        let { from } = this.props.location.state || { from: { pathname: \"/pjl\" } };\r\n        let { redirectToReferrer } = this.state;\r\n        if (redirectToReferrer) return <Redirect to={from} />;\r\n        return (\r\n            <div className={classes.root}>\r\n                <AppBar position=\"static\" className={classes.AppRoot}>\r\n                    <Toolbar className={classes.toolBar}>\r\n                        <div className={classes.grow}>\r\n                            <Typography\r\n                                variant=\"h6\"\r\n                                color=\"inherit\"\r\n                                className={classes.growLogo}\r\n                            >\r\n                                QITQI\r\n                            </Typography>\r\n                            <Tabs value={value} onChange={this.handleChange}\r\n                                  classes={{indicator: classes.tabsIndicator}}>\r\n                                <Tab label=\"首 页\"/>\r\n                                <Tab label=\"帮 助\"/>\r\n                                <Tab label=\"新 闻\"/>\r\n                            </Tabs>\r\n                        </div>\r\n                        <IconButton color=\"inherit\" aria-label=\"Menu\" component={Link} to=\"/pro\">\r\n                            <SettinsOutlined/>\r\n                        </IconButton>\r\n                        <IconButton color=\"inherit\" aria-label=\"Menu\">\r\n                            <PermIdentity/>\r\n                        </IconButton>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <div className={classes.first}>\r\n                    <div className={classes.modle}>\r\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\" className={classes.textColor}>\r\n                            工 作 流 可 视 化 平 台\r\n                        </Typography>\r\n                        <Typography component=\"p\" className={classes.textColor}>\r\n                            Workflow visualization platform\r\n                        </Typography>\r\n                        <div className={classes.loging}>\r\n                            <div>\r\n                                <Grid container spacing={8} alignItems=\"flex-end\">\r\n                                    <Grid item>\r\n                                        <Person/>\r\n                                    </Grid>\r\n                                    <Grid item>\r\n                                        <TextField id=\"input-with-icon-grid\" label=\"用户名\" autoFocus={false}\r\n                                            onChange={this.formdataChange('username')}\r\n                                            InputLabelProps={{\r\n                                                classes: {\r\n                                                    root: classes.cssLabel,\r\n                                                    focused: classes.cssFocused\r\n                                                }\r\n                                            }}\r\n                                            InputProps={{\r\n                                                classes: {\r\n                                                    underline: classes.cssUnderline\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </div>\r\n                            <input type=\"text\" name=\"\" type=\"text\" style={{display: 'none'}}/>\r\n                            <div>\r\n                                <Grid container spacing={8} alignItems=\"flex-end\">\r\n                                    <Grid item>\r\n                                        <Lock/>\r\n                                    </Grid>\r\n                                    <Grid item>\r\n                                        <TextField\r\n                                            id=\"filled-adornment-password\"\r\n                                            type={!this.state.foucse || this.state.showPassword ? 'text' : 'password'}\r\n                                            label=\"密码\"\r\n                                            value={this.state.password}\r\n                                            onChange={this.formdataChange('password')}\r\n                                            onFocus={this.handleType}\r\n                                            InputLabelProps={{\r\n                                                classes: {\r\n                                                    root: classes.cssLabel,\r\n                                                    focused: classes.cssFocused\r\n                                                }\r\n                                            }}\r\n                                            InputProps={{\r\n                                                classes: {\r\n                                                    underline: classes.cssUnderline\r\n                                                },\r\n                                                endAdornment: (\r\n                                                    <InputAdornment position=\"end\">\r\n                                                        <IconButton\r\n                                                            aria-label=\"Toggle password     visibility\"\r\n                                                            onClick={this.handleClickShowPassword}\r\n                                                        >\r\n                                                            {this.state.showPassword ?\r\n                                                                <VisibilityOff className={classes.textColor}/> :\r\n                                                                <Visibility className={classes.textColor}/>}\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                                ),\r\n                                            }}\r\n                                        />\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <Button  variant=\"contained\" className={classes.loginButton} size=\"medium\" onClick={this.login} >登 录</Button>\r\n                        <Button className={classes.forgetButton} onClick={this.oauth} >科技云</Button>\r\n                        <Button className={classes.forgetButton} component={Link} to=\"/Reset\">忘 记 密 码</Button>\r\n                        <Button className={classes.singUpButton} component={Link} to=\"/Register\">注 册</Button>\r\n                    </div>\r\n                    <div className={classes.footer}>\r\n                    </div>\r\n                    <div className={classes.center}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(withRouter(HomePage))"],"sourceRoot":""}